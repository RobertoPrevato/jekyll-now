<!DOCTYPE html>
<!--
/**
 * DataEntry 1.0.1
 * https://github.com/RobertoPrevato/DataEntry
 *
 * Copyright 2016, Roberto Prevato
 * http://ugrose.com
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
-->
<html lang="en">
<head>
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
  <meta charset="utf-8">
  <title>DataEntry</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="description" content="Forms validation library that implements Promise based validation of fields and forms, automatic decoration of fields, localized error messages. Integrable with Angular, Backbone, Knockout, React." />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="styles/public.css">
</head>
<body>
<header id="header">
  <div id="logo-region">
    <img src="styles/logo.png" alt="Roberto Prevato" width="91" height="50">
    <a href="https://github.com/RobertoPrevato/DataEntry">
      <h6>Roberto Prevato - roberto.prevato@gmail.com</h6>
    </a>
  </div>
  <h1>DataEntry - ES6 Promise based validation of fields and forms</h1>
</header>
<div>
  <ul id="main-menu" class="nav nav-pills nav-stacked">
    <li class="active">
      <a href="index.html">Basic example</a>
    </li>
    <li>
      <a href="conditional-rules.html">Conditional rules</a>
    </li>
    <li>
      <a href="formatting-rules.html">Formatting rules</a>
    </li>
    <li>
      <a href="multiple-fields.html">Multiple fields</a>
    </li><!--
    <li>
      <a href="contextual.html">Contextual</a>
    </li>-->
    <li>
      <a href="angular.html">Angular</a>
    </li>
    <li>
      <a href="knockout.html">Knockout</a>
    </li><!--
    <li>
      <a href="react.html">React</a>
    </li>-->
  </ul>
  <div id="partial">
    <form id="test-form" method="post" action="?" action="?" autocomplete="off">
      <fieldset>
        <legend>Basic example</legend>
        <label for="name-field">Username</label>
        <input id="name-field" type="text" name="name" /><br />

        <label for="year-field">Year (between 1900 and 2015)</label>
        <input id="year-field" type="text" name="year" />
        <br />

        <label for="only-letters">A field that is not required, but accepts only letters</label>
        <input id="only-letters" type="text" name="only-letters" /><br />

        <label for="favored-food">Favored food</label>
        <select id="favored-food" name="favored-food">
          <option></option>
          <optgroup label="Salty">
            <option value="pizza">Pizza</option>
            <option value="noodles">Noodles</option>
            <option value="asado">Asado</option>
            <option value="sushi">Sushi</option>
          </optgroup>
          <optgroup label="Sweets">
            <option value="cheese-cake">Cheese cake</option>
            <option value="chocolate">Chocolate</option>
            <option value="marmalade">Marmalade</option>
          </optgroup>
        </select><br />

        <label for="light-side">Light side of the force:</label>
        <input id="light-side" type="radio" value="light" name="force-side" /><br />
        <label for="dark-side">Dark side of the force:</label>
        <input id="dark-side" type="radio" value="dark" name="force-side" /><br />

        <label for="must-check" class="inline">A checkbox that must be checked (policy acceptance)</label>
        <input id="must-check" type="checkbox" name="policy-read" /><br />

      </fieldset>
      <fieldset class="buttons">
        <button class="submit btn">Validate form</button>
      </fieldset>
    </form>
  </div>
</div>
<script src="scripts/libs/i.js"></script>
<script src="scripts/locale/errors.en.js"></script>

<!-- Promise polyfill: required, for example, by Opera -->
<script>
  (function () {
    if (!window.Promise) {
      var head = document.getElementsByTagName("head")[0];
      var a = document.createElement("script");
      a.type = "text/javascript";
      a.src = "scripts/libs/polyfills/es6-promise.min.js";
      head.appendChild(a);

      alert("Your browser requires a polyfill, since it doesn't implement the native Promise object.");
    }
  })();
</script>

<script src="scripts/libs/dataentry.js"></script>
<script type="text/javascript">
  (function () {

    var dataentry = new Forms.DataEntry({
      element: document.getElementById("test-form"),
      schema: {
        name: {
          validation: ["required"],
          format: ["cleanSpaces"]
        },
        year: {
          validation: ["required", { name: "integer", params: [{ min: 1900, max: 2015 }] }]
        },
        "only-letters": {
          validation: ["letters"]
        },
        "policy-read": {
          validation: ["mustCheck"]
        },
        "favored-food": {
          validation: ["required"]
        },
        "force-side": {
          validation: ["required"]
        }
      }
    });
window.dataentry = dataentry;
    var testForm = document.getElementById("test-form");
    testForm.addEventListener("submit", function (e) {
      e.preventDefault();
      dataentry.validate().then(function (data) {
        if (data.valid)
          console.log("valid!", data.values), alert("The form is valid!");
        else
          console.log("form invalid!", data.errors);
      }, function (data) {
        console.log("validation failed!", data);
      });
    });
  })();
</script>
</body>
</html>
