R("string",[],function(){return{repeat:function(a,b){return new Array(b+1).join(a)},trim:function(a){return a?a.replace(/^\s+|\s+$/g,""):a}}}),R("code",[],function(){var a=/<script([^>]*)>([\s\S]*)<\/script>/,b=/src=['"]([^"']+)['"]/;return{inject:function(a){var b=document.createElement("script");b.type="text/javascript","function"==typeof a&&(a=";("+a.toString()+")();");try{b.appendChild(document.createTextNode(a)),document.body.appendChild(b)}catch(c){b.text=a,document.body.appendChild(b)}},fromHtml:function(c){var d=c.match(/<script[^>]*>[\s\S]*?<\/script>/g);if(!d)return c;for(var e=document.getElementsByTagName("head")[0],f=0,g=d.length;g>f;f++){var h=d[f],i=h.match(a),j=document.createElement("script");j.setAttribute("type","text/javascript"),h.indexOf("src")>-1?j.setAttribute("src",i[1].match(b)[1]):j.innerText=i[2],e.appendChild(j),e.removeChild(j)}}}}),R("extend",[],function(){return function(a,b){var c,d=this;c=a&&_.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},_.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&_.extend(c.prototype,a),c.__super__=d.prototype,c}}),R("events",[],function(){var a=[],b=(a.push,a.slice),c=(a.splice,{on:function(a,b,c){if(!e(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!e(this,"once",a,[b,c])||!b)return this;var d=this,f=_.once(function(){d.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var d,f,g,h,i,j,k,l;if(!this._events||!e(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events=void 0,this;for(h=a?[a]:_.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=g.length;l>k;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var c=b.call(arguments,1);if(!e(this,"trigger",a,c))return this;var d=this._events[a],g=this._events.all;return d&&f(d,c),g&&f(g,arguments),this},stopListening:function(a,b,c){var d=this._listeningTo;if(!d)return this;var e=!b&&!c;c||"object"!=typeof b||(c=this),a&&((d={})[a._listenId]=a);for(var f in d)a=d[f],a.off(b,c,this),(e||_.isEmpty(a._events))&&delete this._listeningTo[f];return this}}),d=/\s+/,e=function(a,b,c,e){if(!c)return!0;if("object"==typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(e));return!1}if(d.test(c)){for(var g=c.split(d),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(e));return!1}return!0},f=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},g={listenTo:"on",listenToOnce:"once"};return _.each(g,function(a,b){c[b]=function(b,c,d){var e=this._listeningTo||(this._listeningTo={}),f=b._listenId||(b._listenId=_.uniqueId("l"));return e[f]=b,d||"object"!=typeof c||(d=this),b[a](c,d,this),this}}),c}),R("progress",[],function(){return function(a){function b(){v.clearRect(0,0,r.width,r.height),v.save(),v[d](),v[e]="#f8f8f8",v[f]="#aeaeae",v[g]=1,v[h](s,t,u,0,2*c,!1),v[i](),v[j](),v[k](),v[d](),v[h](s,t,u,0,2*c,!1),v[l](),v[d](),v[f]="black",v[g]=5,v[m]=20,v[n]="rgba(0,0,0,.9)",v[o]=0,v[p]=0,v[h](s,t,u+3,0,2*c,!1),v[k](),v[q](),v[d](),v[f]="#aeaeae",v[e]="#fff",v[h](s,t,55,0,2*c,!1),v[i](),v[j](),v[d](),v[f]="#aeaeae",v[g]=1,v[m]=20,v[n]="rgba(0,0,0,.9)",v[o]=0,v[p]=0,v[h](s,t,55,0,2*c,!1),v[k](),v[n]="transparent",v[q](),B+=z,v[d](),v[g]=15,v[h](s,t,65,c*A,c*B,!1),v[f]="red",v[k](),v[i](),v[q](),B>A+2.15&&(window.clearInterval(E),a&&a()),D++,D%x==0&&(D=0,C--),v[d](),v[e]="#004683",v.font="80px Verdana",v.textAlign="center",v.fillText(C?C.toString():"!",s,t+30),v[i]()}var c=Math.PI,d="beginPath",e="fillStyle",f="strokeStyle",g="lineWidth",h="arc",i="closePath",j="fill",k="stroke",l="clip",m="shadowBlur",n="shadowColor",o="shadowOffsetX",p="shadowOffsetY",q="restore",r=document.getElementById("canvas"),s=100,t=85,u=75,v=r.getContext("2d"),w=2,x=30,y=3,z=w/(x*y),A=new Date,A=1.5,B=A,C=y,D=0,E=window.setInterval(b,1e3/x)}}),R("model",["extend","events"],function(a,b){var c=function(a,b){b&&_.extend(this,b),this.cid=_.uniqueId("c"),this.disposables=[],a=_.defaults({},a,_.result(this,"defaults"));var c="attrsFilter";this[c]&&(a=this[c](a)),this.set(a).initialize.apply(this,arguments)};return _.extend(c.prototype,b,{initialize:function(){},result:function(a,b){return this[a]?_.isFunction(this[a])?this[a](b):this[a]:null},set:function(a,b){return"object"==typeof a?(_.each(a,function(a,b){this.set(b,a)},this),this):(_.isFunction(this[a])?this[a](b):this[a]=ko.o(b),this)},invert:function(a){return this[a](!this[a]()),this},swap:function(a,b){var c=this[a](),d=this[b]();return this[a](d),this[b](c),this},merge:function(a){for(var b in a)_.isFunction(this[b])?this[b](a[b]):this[b]=a[b];return this},defer:function(a,b){return this.delay(a,0,b)},delay:function(a,b,c){return _.delay(_.bind(function(){_.isFunction(a)?a.call(this,c):this[a](c)},this),b),this},interval:function(a,b,c){this[a]&&(window.clearInterval(this[a]),this[a]=null);var d=this[a]=window.setInterval(_.bind(b,this),c);return this.disposables.push({dispose:_.partial(function(a,b){window.clearInterval(b)},a,d)}),this},sub:function(a,b){return _.isString(b)&&(b=this[b]),this.disposables.push(this[a].subscribe(b.bind(this))),this},dispose:function(){for(var a=this.disposables,b=0,c=a.length;c>b;b++)a[b].dispose();return this.onDispose&&this.onDispose(),this},setError:function(a,b){var c=this;return this.error({title:a,retry:b?function(){c.error(void 0).loading(!0),_.delay(b.bind(c),300)}:null}).loading(!1)},serialize:function(){var a={};return _.each(_.keys(this.defaults),function(b){a[b]=this[b]()},this),a},pick:function(a){_.isString(a)&&(a=_.toArray(arguments));var b={};return _.each(a,function(a){b[a]=ko.unwrap(this[a])},this),b}}),c.extend=a,c}),R("models.dashboard",["model","code","progress"],function(a,b,c){return a.extend({initialize:function(){},spademo:function(){$(".spa-demo .btn-warning").remove(),$("#canvas").attr("width","200").attr("height","200"),R("example-area")||c(function(){var a=ko.templates["example-area"];b.fromHtml(a),document.getElementById("partial").innerHTML=a,$("#canvas").fadeOut("fast",function(){$("#partial").addClass("foo")})}),R("example-area-runner",["example-area"],function(a){var b="The module is now loaded!";console.log("%c"+b,"color:darkgreen;")})}})}),ko.templates||(ko.templates={}),function(a){var b,c={dashboard:'<h2>scalability made easy!</h2> <h4>R.js makes easy to load scripts in blocks (as they become needed), and fire callbacks when dependencies are ready</h4> <ol> <li>all entities in this page are loaded in the <strong>wrong</strong> order (see the page source code and the script elements)</li> <li>R.js executes the modules functions in the right order, to satisfy dependencies</li> <li>this demo utilizes <a href="https://knockoutjs.com/">Knockout</a> library, but the same principles apply to any situation</li> </ol> <p>Live example: click the button below to simulate the dynamic loading of JavaScript for a new area, after a delay (like an AJAX call)</p> <div class="spa-demo"> <button class="btn btn-warning" data-bind="click: spademo">Click to load a new area (partial view)</button> <hr /> <canvas id="canvas" width="0" height="0"></canvas> <div id="partial"></div> <br class="break" /> </div> <h2>Features:</h2> <ol> <li>Supports asynchronous module definition</li> <li>Keeps synchronous what can stay synchronous</li> <li>Evaluates the function that defines an object, only when all dependencies are ready</li> <li>Includes grunt task to implement <strong>super minification</strong> (minification of objects keys)</li> </ol>',"example-area":'<div class="area-view"> <hr /> <h2>Example sub-view</h2> <p>this example demonstrates how to load and execute JavaScript only when they are actually needed (for scalability), using R.js</p> <script src="scripts/demo/example-area/example-area.js"></script> </div>'};for(b in c)a[b]=c[b]}(ko.templates),R("example-area",["model"],function(a){return function(){}}),R("app",["models.dashboard"],function(a){console.log("%cApplying first binding!","color:darkgreen;");var b=document.getElementById("content");b.setAttribute("data-bind","template: 'dashboard'"),ko.applyBindings(new a,b)});